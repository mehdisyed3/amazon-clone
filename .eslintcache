[{"/Users/syed/Documents/Projects/amazon-clone/src/reportWebVitals.js":"1","/Users/syed/Documents/Projects/amazon-clone/src/index.js":"2","/Users/syed/Documents/Projects/amazon-clone/src/App.js":"3","/Users/syed/Documents/Projects/amazon-clone/src/Header.js":"4","/Users/syed/Documents/Projects/amazon-clone/src/Home.js":"5","/Users/syed/Documents/Projects/amazon-clone/src/Product.js":"6","/Users/syed/Documents/Projects/amazon-clone/src/Checkout.js":"7","/Users/syed/Documents/Projects/amazon-clone/src/Subtotal.js":"8","/Users/syed/Documents/Projects/amazon-clone/src/Context.js":"9","/Users/syed/Documents/Projects/amazon-clone/src/CheckoutProduct.js":"10","/Users/syed/Documents/Projects/amazon-clone/src/Login.js":"11","/Users/syed/Documents/Projects/amazon-clone/src/firebase.js":"12","/Users/syed/Documents/Projects/amazon-clone/src/Payment.js":"13","/Users/syed/Documents/Projects/amazon-clone/src/axios.js":"14","/Users/syed/Documents/Projects/amazon-clone/src/Orders.js":"15","/Users/syed/Documents/Projects/amazon-clone/src/Order.js":"16"},{"size":362,"mtime":1606433589604,"results":"17","hashOfConfig":"18"},{"size":677,"mtime":1606765511496,"results":"19","hashOfConfig":"18"},{"size":1442,"mtime":1607481967654,"results":"20","hashOfConfig":"18"},{"size":1959,"mtime":1607730826267,"results":"21","hashOfConfig":"18"},{"size":2560,"mtime":1607730912877,"results":"22","hashOfConfig":"18"},{"size":1081,"mtime":1607730852377,"results":"23","hashOfConfig":"18"},{"size":1096,"mtime":1607730836809,"results":"24","hashOfConfig":"18"},{"size":1060,"mtime":1607730991112,"results":"25","hashOfConfig":"18"},{"size":700,"mtime":1607477347323,"results":"26","hashOfConfig":"18"},{"size":934,"mtime":1607730233708,"results":"27","hashOfConfig":"18"},{"size":2328,"mtime":1607481893424,"results":"28","hashOfConfig":"18"},{"size":636,"mtime":1606931627115,"results":"29","hashOfConfig":"18"},{"size":4744,"mtime":1607640953108,"results":"30","hashOfConfig":"18"},{"size":238,"mtime":1607642487907,"results":"31","hashOfConfig":"18"},{"size":1319,"mtime":1607730873532,"results":"32","hashOfConfig":"18"},{"size":1056,"mtime":1607730289808,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1epif3l",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"39"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"43"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":2,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"39"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"39"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65","usedDeprecatedRules":"39"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/syed/Documents/Projects/amazon-clone/src/reportWebVitals.js",[],["72","73"],"/Users/syed/Documents/Projects/amazon-clone/src/index.js",[],["74","75"],"/Users/syed/Documents/Projects/amazon-clone/src/App.js",["76","77"],"import React, { useContext, useEffect } from 'react'\nimport './App.css';\nimport Header from './Header'\nimport Home from './Home'\nimport { Switch, Route } from 'react-router-dom'\nimport Checkout from './Checkout';\nimport Login from './Login'\nimport { auth } from './firebase'\nimport { Context } from './Context.js'\nimport Payment from './Payment'\nimport { loadStripe } from '@stripe/stripe-js'\nimport { Elements } from '@stripe/react-stripe-js'\nimport Orders from './Orders';\n\n\nconst promise = loadStripe('pk_test_51HvtWZDBgrMbvem70dLJ4lbMCSg9gWJcQJnOZZzfD6hV6HNFsMYoZ7Fv3lwJ60Ilm3uVqugOy1BbdzcPfpt6qe9i005SF4Sy4U')\n// t > 6.22\nfunction App() {\n  const { setUserObj, setUser, user } = useContext(Context)\n\n  // console.log('USER', user)\n\n  useEffect(() => {\n\n    auth.onAuthStateChanged(user => { // USER\n      if (user) {\n        setUser(user.email)\n        setUserObj(user)\n      }\n\n    })\n\n  }, [])\n\n  return (\n    <div className=\"app\">\n\n      <Header />\n      <Switch>\n\n        <Route exact path='/' >\n          <Home />\n        </Route>\n        <Route path='/checkout'>\n          <Checkout />\n        </Route>\n        <Route path='/login'>\n          <Login />\n        </Route>\n        <Route path='/payment' >\n          <Elements stripe={promise}>\n            <Payment />\n          </Elements>\n        </Route>\n        <Route path='/orders'>\n          <Orders />\n        </Route>\n\n      </Switch>\n\n    </div>\n\n  );\n}\n\nexport default App;\n",["78","79"],"/Users/syed/Documents/Projects/amazon-clone/src/Header.js",[],"/Users/syed/Documents/Projects/amazon-clone/src/Home.js",[],"/Users/syed/Documents/Projects/amazon-clone/src/Product.js",[],"/Users/syed/Documents/Projects/amazon-clone/src/Checkout.js",["80","81"],"/Users/syed/Documents/Projects/amazon-clone/src/Subtotal.js",[],"/Users/syed/Documents/Projects/amazon-clone/src/Context.js",[],"/Users/syed/Documents/Projects/amazon-clone/src/CheckoutProduct.js",["82"],"/Users/syed/Documents/Projects/amazon-clone/src/Login.js",[],["83","84"],"/Users/syed/Documents/Projects/amazon-clone/src/firebase.js",[],"/Users/syed/Documents/Projects/amazon-clone/src/Payment.js",["85","86"],"import React, { useContext, useState, useEffect } from 'react'\nimport './Payment.css'\nimport { Context } from './Context'\nimport CheckoutProduct from './CheckoutProduct'\nimport { Link, useHistory } from 'react-router-dom'\nimport { CardElement, useElements, useStripe } from '@stripe/react-stripe-js'\nimport CurrencyFormat from 'react-currency-format'\nimport axios from './axios';\nimport { db } from './firebase'\n\n\nfunction Payment() {\n  const { user, userObj, cart, setCart } = useContext(Context)\n  const [error, setError] = useState(null);\n  const [disabled, setDisabled] = useState(true)\n  const [succeeded, setSucceeded] = useState(false);\n  const [processing, setProcessing] = useState(\"\");\n  const [clientSecret, setClientSecret] = useState(true)\n\n  console.log(\"!!!!!!!!!!!!!\",<CardElement/>)\n\n  const history = useHistory()\n\n  const stripe = useStripe()\n  const elements = useElements()\n\n  const items = cart.map((item, i) => <CheckoutProduct key={i} id={item.id} image={item.image} title={item.title} price={item.price} rating={item.rating} />)\n  const total = cart?.length && cart.reduce((acc, cv) => acc + cv.price, 0)\n\n  useEffect(() => {\n    // generate the special stripe secret which allows us to charge a customer\n    const getClientSecret = async () => {\n      const response = await axios({\n        method: 'post',\n        // Stripe expects the total in a currencies subunits\n        url: `/payments/create?total=${total * 100}`\n      });\n      setClientSecret(response.data.clientSecret)\n    }\n\n    getClientSecret();\n  }, [cart])\n\n  // console.log(\"CLIENT SECRET IS >>>>>>\", clientSecret)\n  // console.log('@@@@@@@@', userObj)\n\n\n\n\n  const handleSubmit = async (event) => {\n    // do all the fancy stripe stuff...\n    event.preventDefault();\n    setProcessing(true);\n\n    const payload = await stripe.confirmCardPayment(clientSecret, {\n      payment_method: {\n        card: elements.getElement(CardElement)\n      }\n    })\n      .then(({ paymentIntent }) => { //destructured\n        // paymentIntent = payment confirmation\n\n        db\n          .collection('users')\n          .doc(userObj?.uid)\n          .collection('orders')\n          .doc(paymentIntent.id)\n          .set({\n            cart: cart,\n            amount: paymentIntent.amount,\n            created: paymentIntent.created\n          })\n\n        setSucceeded(true);\n        setError(null)\n        setProcessing(false)\n\n        setCart([])\n\n        history.replace('/orders') // replace because , dont want user to come back to the payment page if pressd BACK \n      })\n\n  }\n\n  const handleChange = event => {\n    // Listen for changes in the CardElement\n    // and display any errors as the customer types their card details\n    setDisabled(event.empty);\n    setError(event.error ? event.error.message : \"\");\n  }\n\n  return (\n    <div className='payment'>\n      <div className='payment__container'>\n        <h1>\n          Checkout (\n                        <Link to=\"/checkout\">{cart?.length} items</Link>\n                        )\n                </h1>\n        <div className='payment__section'>\n          <div className='payment__title'>\n            <h3>Delivery Address</h3>\n          </div>\n\n          <div className='payment__address'>\n            <p>{user}</p>\n            <p>12 Aylesbury Dr</p>\n            <p>Brampton, ON</p>\n          </div>\n        </div>\n\n        <div className='payment__section'>\n          <div className='payment__title'>\n            <h3>Review items and delivery</h3>\n          </div>\n          <div className='payment__items'>\n\n            {items}\n\n          </div>\n        </div>\n\n        <div className='payment__section'>\n          <div className='payment__title'>\n            <h3>Payment Method</h3>\n          </div>\n          <div className='payment__details'>\n            {/* Stripe magic */}\n            <form onSubmit={handleSubmit}>\n\n\n              <CardElement placeHolder=\"sada\" onChange={handleChange} />\n\n              <div className='payment__priceContainer'>\n                <CurrencyFormat\n                  renderText={(value) => (\n                    <>\n                      <h3>Order Total: {value}</h3>\n                    </>\n                  )}\n                  decimalScale={2}\n                  value={total}\n                  displayType={\"text\"}\n                  thousandSeparator={true}\n                  prefix={\"$\"}\n                />\n                <button disabled={!cart.length || processing || disabled || succeeded}>\n                  <span>{processing ? <p>Processing</p> : \"Buy Now\"}</span>\n                </button>\n              </div>\n\n              {error && <div>{error}</div>}\n\n            </form>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  )\n}\n\nexport default Payment\n","/Users/syed/Documents/Projects/amazon-clone/src/axios.js",[],"/Users/syed/Documents/Projects/amazon-clone/src/Orders.js",["87","88"],"/Users/syed/Documents/Projects/amazon-clone/src/Order.js",[],{"ruleId":"89","replacedBy":"90"},{"ruleId":"91","replacedBy":"92"},{"ruleId":"89","replacedBy":"93"},{"ruleId":"91","replacedBy":"94"},{"ruleId":"95","severity":1,"message":"96","line":19,"column":32,"nodeType":"97","messageId":"98","endLine":19,"endColumn":36},{"ruleId":"99","severity":1,"message":"100","line":33,"column":6,"nodeType":"101","endLine":33,"endColumn":8,"suggestions":"102"},{"ruleId":"89","replacedBy":"103"},{"ruleId":"91","replacedBy":"104"},{"ruleId":"105","severity":2,"message":"106","line":8,"column":22,"nodeType":"107","messageId":"108","endLine":8,"endColumn":23},{"ruleId":"109","severity":2,"message":"110","line":8,"column":22,"nodeType":"97","messageId":"111","endLine":8,"endColumn":23},{"ruleId":"112","severity":1,"message":"113","line":13,"column":7,"nodeType":"114","endLine":13,"endColumn":61},{"ruleId":"89","replacedBy":"115"},{"ruleId":"91","replacedBy":"116"},{"ruleId":"99","severity":1,"message":"117","line":42,"column":6,"nodeType":"101","endLine":42,"endColumn":12,"suggestions":"118"},{"ruleId":"95","severity":1,"message":"119","line":55,"column":11,"nodeType":"97","messageId":"98","endLine":55,"endColumn":18},{"ruleId":"95","severity":1,"message":"120","line":6,"column":8,"nodeType":"97","messageId":"98","endLine":6,"endColumn":23},{"ruleId":"95","severity":1,"message":"121","line":11,"column":20,"nodeType":"97","messageId":"98","endLine":11,"endColumn":24},"no-native-reassign",["122"],"no-negated-in-lhs",["123"],["122"],["123"],"no-unused-vars","'user' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'setUser' and 'setUserObj'. Either include them or remove the dependency array.","ArrayExpression",["124"],["122"],["123"],"no-unused-expressions","Expected an assignment or function call and instead saw an expression.","ExpressionStatement","unusedExpression","no-undef","'Ï' is not defined.","undef","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement",["122"],["123"],"React Hook useEffect has a missing dependency: 'total'. Either include it or remove the dependency array.",["125"],"'payload' is assigned a value but never used.","'CheckoutProduct' is defined but never used.","'cart' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"126","fix":"127"},{"desc":"128","fix":"129"},"Update the dependencies array to be: [setUser, setUserObj]",{"range":"130","text":"131"},"Update the dependencies array to be: [cart, total]",{"range":"132","text":"133"},[897,899],"[setUser, setUserObj]",[1542,1548],"[cart, total]"]